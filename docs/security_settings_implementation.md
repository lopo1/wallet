# 安全设置页面实现文档

## 概述

根据用户需求，我重新设计了安全设置功能，将锁屏时间设置从弹出层改为专门的页面，并创建了一个完整的安全设置模块，支持未来扩展更多安全功能。

## 主要改进

### 1. 页面结构重构

#### 原有结构
- 设置页面 → 安全性与隐私 → 弹出层 → 锁屏时间对话框

#### 新结构
- 设置页面 → 安全性与隐私页面 → 锁屏时间设置页面
- 使用页面导航替代弹出层，提供更好的用户体验

### 2. 新增页面

#### SecuritySettingsScreen (安全设置页面)
- **路径**: `lib/screens/security_settings_screen.dart`
- **功能**: 展示所有安全相关设置选项
- **设计**: 列表形式展示，每个选项有图标、标题、副标题和状态

#### LockScreenTimeoutScreen (锁屏时间设置页面)
- **路径**: 包含在 `security_settings_screen.dart` 中
- **功能**: 专门的锁屏时间选择页面
- **设计**: 下拉选择样式，支持单选操作

### 3. 安全设置选项

#### 已实现功能
1. **锁屏时间** ✅
   - 图标: 计时器 (绿色)
   - 功能: 完整的时间选择和保存
   - 选项: 立即、15秒、30秒、1分钟、5分钟、10分钟、永不

#### 预留功能 (未来扩展)
2. **生物识别** 🔄
   - 图标: 指纹 (紫色)
   - 功能: 指纹或面部识别设置
   - 状态: 显示"未启用"

3. **密码设置** 🔄
   - 图标: 锁 (橙色)
   - 功能: 修改钱包密码

4. **助记词备份** 🔄
   - 图标: 备份 (紫色)
   - 功能: 备份钱包助记词

5. **隐私设置** 🔄
   - 图标: 隐藏 (灰色)
   - 功能: 控制数据隐私

### 4. 用户体验改进

#### 导航体验
- **返回按钮**: 每个页面都有清晰的返回按钮
- **页面标题**: 明确显示当前页面功能
- **面包屑导航**: 用户清楚知道自己在哪个层级

#### 选择体验
- **视觉反馈**: 选中项有明显的视觉区别
- **即时保存**: 选择后立即保存并显示成功提示
- **状态显示**: 在安全设置页面显示当前锁屏时间状态

#### 交互设计
- **下拉选择**: 使用原生的选择体验，而非弹出对话框
- **动画过渡**: 页面切换有平滑的动画效果
- **触觉反馈**: 选择操作有适当的视觉和触觉反馈

### 5. 技术实现

#### 页面架构
```
SettingsScreen
├── SecuritySettingsScreen
│   ├── LockScreenTimeoutScreen
│   ├── BiometricSettings (预留)
│   ├── PasswordSettings (预留)
│   ├── BackupSettings (预留)
│   └── PrivacySettings (预留)
```

#### 状态管理
- **本地状态**: 使用 `StatefulWidget` 管理页面状态
- **数据持久化**: 通过 `StorageService` 保存设置
- **状态同步**: 页面间通过回调函数同步状态

#### 路由配置
```dart
'/settings': (context) => const SettingsScreen(),
'/security-settings': (context) => const SecuritySettingsScreen(),
```

### 6. 视觉设计

#### 色彩方案
- **背景色**: `#1A1B23` (深色主题)
- **卡片背景**: 半透明白色
- **图标颜色**: 每个功能使用不同的主题色
- **选中状态**: `#6366F1` (紫色主题)

#### 布局设计
- **统一间距**: 12px 和 16px 的标准间距
- **圆角设计**: 12px 圆角保持一致性
- **图标容器**: 40x40px 的彩色图标容器
- **文字层级**: 标题16px，副标题14px

### 7. 测试覆盖

#### 单元测试
- **设置页面测试**: 验证导航到安全设置
- **安全设置页面测试**: 验证所有选项显示
- **锁屏时间页面测试**: 验证选择和保存功能

#### 测试文件
- `test/screens/settings_screen_test.dart`
- `test/screens/security_settings_screen_test.dart`

### 8. 代码质量

#### 代码组织
- **单一职责**: 每个页面负责特定功能
- **可扩展性**: 预留接口便于添加新功能
- **代码复用**: 共用的UI组件可以复用

#### 性能优化
- **懒加载**: 页面按需加载
- **状态优化**: 避免不必要的重建
- **内存管理**: 正确处理控制器的生命周期

## 使用指南

### 访问安全设置
1. 打开设置页面
2. 点击"安全性与隐私"
3. 进入安全设置页面

### 设置锁屏时间
1. 在安全设置页面点击"锁屏时间"
2. 选择合适的时间选项
3. 系统自动保存并返回

### 扩展新功能
1. 在 `SecuritySettingsScreen` 中添加新的设置项
2. 创建对应的设置页面
3. 实现具体的功能逻辑
4. 添加相应的测试

## 未来规划

### 短期目标
1. **生物识别**: 实现指纹和面部识别
2. **密码管理**: 添加密码修改功能
3. **助记词备份**: 实现安全的助记词备份

### 长期目标
1. **多重签名**: 支持多重签名安全
2. **硬件钱包**: 集成硬件钱包支持
3. **安全审计**: 添加安全操作日志

## 总结

新的安全设置模块提供了更好的用户体验和更清晰的功能组织。通过页面化的设计，用户可以更直观地管理各种安全设置，同时为未来的功能扩展提供了良好的架构基础。